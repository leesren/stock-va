<!DOCTYPE html>
<html>

<head>
  <title>估值计算器（最终版）</title>
  <meta charset="UTF-8" />
  <script>
   var  $list =  [{"name":"云天化","code":"600096","va":"22.68","pb":1.96,"min":"17.12","max":"22.83","roe":"24.4","eps":"2.91","market":"1","rate":"3","updateTime":"25/07/14 13:44:24","index":1,"rorNow":"13.69","ror":"13.41"},{"name":"中国国贸","code":"600007","va":"20.88","pb":2.37,"min":"20.09","max":"26.49","roe":"13.6","eps":"1.28","market":"1","rate":"3","updateTime":"25/07/14 13:39:48","index":2,"rorNow":"5.42","ror":"5.38"},{"name":"紫金矿业","code":"601899","va":"19.11","pb":3.67,"min":"14.40","max":"20.05","roe":"21.8","eps":"1.21","market":"1","rate":"3","updateTime":"25/07/14 13:44:31"},{"name":"中国核电","code":"601985","va":"9.49","pb":1.78,"min":"8.95","max":"11.99","roe":"10.6","eps":"0.51","market":"1","rate":"3","updateTime":"25/07/14 13:39:53"},{"name":"北大荒","code":"600598","va":"14.68","pb":3.54,"min":"11.92","max":"16.51","roe":"13.9","eps":"0.65","market":"1","rate":"3","updateTime":"25/07/14 13:44:27"},{"name":"广日股份","code":"600894","va":"10.23","pb":1.06,"min":"8.48","max":"13.03","roe":"9.32","eps":"0.92","market":"1","rate":"3","updateTime":"25/07/14 13:39:58"},{"name":"沪电股份","code":"002463","va":"48.18","pb":7.93,"min":"27.18","max":"48.18","roe":"22","eps":"1.89","market":"0","rate":"3","updateTime":"25/07/14 13:40:01"},{"name":"焦点科技","code":"002315","va":"48.55","pb":6.34,"min":"22.22","max":"50.33","roe":"18.4","eps":"1.44","market":"0","rate":"3","updateTime":"25/07/14 13:40:04"},{"name":"科伦药业","code":"002422","va":"32.80","pb":2.35,"min":"26.17","max":"38.85","roe":"13.1","eps":"1.86","market":"0","rate":"3","updateTime":"25/07/14 13:40:07"},{"name":"漫步者","code":"002351","va":"13.23","pb":4.4,"min":"9.17","max":"19.79","roe":"18.2","eps":"0.56","market":"0","rate":"3","updateTime":"25/07/14 13:40:09"},{"name":"鲁阳节能","code":"002088","va":"11.13","pb":2.24,"min":"8.90","max":"13.33","roe":"16.1","eps":"0.92","market":"0","rate":"3","updateTime":"25/07/14 13:40:12"},{"name":"东阿阿胶","code":"000423","va":"49.94","pb":3.24,"min":"43.94","max":"66.03","roe":"11.12","eps":"2.4","market":"0","rate":"3","updateTime":"25/07/14 13:40:15"},{"name":"中远海能","code":"600026","va":"10.32","pb":1.35,"min":"10.01","max":"17.83","roe":"8.48","eps":"0.85","market":"1","rate":"3","updateTime":"25/07/14 13:40:17"},{"name":"普洛药业","code":"000739","va":"14.69","pb":2.59,"min":"12.02","max":"16.89","roe":"16","eps":"0.95","market":"0","rate":"3","updateTime":"25/07/14 13:40:19"},{"name":"浙能电力","code":"600023","va":"5.16","pb":0.98,"min":"4.90","max":"7.09","roe":"10.01","eps":"0.49","market":"1","rate":"3","updateTime":"25/07/14 13:40:21"},{"name":"华能国际","code":"600011","va":"7.18","pb":1.82,"min":"5.96","max":"9.16","roe":"4.57","eps":"0.68","market":"1","rate":"3","updateTime":"25/07/14 13:40:24"},{"name":"裕同科技","code":"002831","va":"24.02","pb":2,"min":"19.67","max":"27.17","roe":"13.9","eps":"1.74","market":"0","rate":"3","updateTime":"25/07/14 13:40:26"},{"name":"江中药业","code":"600750","va":"22.01","pb":3.69,"min":"17.20","max":"26.05","roe":"20.3","eps":"1.23","market":"1","rate":"3","updateTime":"25/07/14 13:40:29"},{"name":"立讯精密","code":"002475","va":"35.34","pb":3.63,"min":"25.89","max":"44.78","roe":"21.6","eps":"1.86","market":"0","rate":"3","updateTime":"25/07/14 13:40:31"},{"name":"安克创新","code":"300866","va":"119.06","pb":7.39,"min":"50.00","max":"119.06","roe":"17.8","eps":"3.97","market":"0","rate":"3","updateTime":"25/07/14 13:40:34"},{"name":"今世缘","code":"603369","va":"39.15","pb":3.13,"min":"34.39","max":"56.86","roe":"24.73","eps":"2.515","market":"1","rate":"3","updateTime":"25/07/14 13:40:36"},{"name":"春秋航空","code":"601021","va":"55.05","pb":3.17,"min":"48.60","max":"61.81","roe":"15.32","eps":"2.3","market":"1","rate":"3","updateTime":"25/07/14 13:40:38"},{"name":"宝信软件","code":"600845","va":"23.73","pb":6.64,"min":"22.90","max":"36.45","roe":"24.65","eps":"1.083","market":"1","rate":"3","updateTime":"25/07/14 13:40:41"},{"name":"杰克股份","code":"603337","va":"35.17","pb":3.66,"min":"23.16","max":"41.68","roe":"13.54","eps":"1.3","market":"1","rate":"3","updateTime":"25/07/14 13:40:44"},{"name":"重庆啤酒","code":"600132","va":"55.38","pb":21.94,"min":"49.91","max":"68.90","roe":"65","eps":"2.58","market":"1","rate":"3","updateTime":"25/07/14 13:40:47"},{"name":"伯特利","code":"603596","va":"49.97","pb":4.58,"min":"32.43","max":"64.93","roe":"18.9","eps":"2.15","market":"1","rate":"3","updateTime":"25/07/14 13:40:49"},{"name":"华利集团","code":"300979","va":"55.22","pb":4.18,"min":"48.93","max":"74.21","roe":"27.25","eps":"2.77","market":"0","rate":"3","updateTime":"25/07/14 13:40:52"},{"name":"新产业","code":"300832","va":"54.87","pb":5.4,"min":"49.93","max":"80.66","roe":"23","eps":"2.1","market":"0","rate":"3","updateTime":"25/07/14 13:40:55"},{"name":"上海机电","code":"600835","va":"22.11","pb":1.65,"min":"10.15","max":"24.27","roe":"7.59","eps":"0.96","market":"1","rate":"3","updateTime":"25/07/14 13:40:57"},{"name":"周大生","code":"002867","va":"13.35","pb":2.46,"min":"9.20","max":"16.54","roe":"21.09","eps":"1.01","market":"0","rate":"3","updateTime":"25/07/14 13:40:59"},{"name":"浙江医药","code":"600216","va":"15.21","pb":1.32,"min":"9.15","max":"18.18","roe":"9.26","eps":"1.09","market":"1","rate":"3","updateTime":"25/07/14 13:41:02"},{"name":"华东医药","code":"000963","va":"40.46","pb":3.08,"min":"26.38","max":"44.55","roe":"14.2","eps":"1.62","market":"0","rate":"3","updateTime":"25/07/14 13:41:05"},{"name":"老凤祥","code":"600612","va":"50.42","pb":2.16,"min":"47.26","max":"81.60","roe":"17.6","eps":"3.75","market":"1","rate":"3","updateTime":"25/07/14 13:41:07"},{"name":"海康威视","code":"002415","va":"27.78","pb":3.4,"min":"24.38","max":"32.86","roe":17.4,"eps":1.39,"market":"0","rate":3,"updateTime":"25/07/14 13:41:10"},{"name":"深高速","code":"600548","va":"10.57","pb":1.16,"min":"9.23","max":"13.17","roe":"11.99","eps":"0.98","market":"1","rate":"3","updateTime":"25/07/14 13:41:13"},{"name":"佛燃能源","code":"002911","va":"10.54","pb":1.63,"min":"8.58","max":"12.31","roe":"19.49","eps":"0.61","market":"0","rate":"3","updateTime":"25/07/14 13:41:15"},{"name":"海天味业","code":"603288","va":"38.53","pb":7.94,"min":"32.85","max":"47.93","roe":"31.65","eps":"1.44","market":"1","rate":"3","updateTime":"25/07/14 13:41:18"},{"name":"青岛啤酒","code":"600600","va":"68.73","pb":3.05,"min":"51.76","max":"82.30","roe":"17.17","eps":"3.66","market":"1","rate":"3","updateTime":"25/07/14 13:41:20"},{"name":"华润三九","code":"000999","va":"31.27","pb":2.51,"min":"26.99","max":"36.57","roe":"17.3","eps":"2.63","market":"0","rate":"3","updateTime":"25/07/14 13:41:22"},{"name":"益丰药房","code":"603939","va":"24.40","pb":2.82,"min":"17.10","max":"37.29","roe":"15.4","eps":"1.25","market":"1","rate":"3","updateTime":"25/07/14 13:41:24"},{"name":"赛腾股份","code":"603283","va":"32.84","pb":2.95,"min":"29.21","max":"57.71","roe":"35.28","eps":"3.58","market":"1","rate":"3","updateTime":"25/07/14 13:41:27"},{"name":"伊利股份","code":"600887","va":"27.46","pb":3.43,"min":"20.35","max":"29.38","roe":"20.2","eps":"1.71","market":"1","rate":"3","updateTime":"25/07/14 13:41:29"},{"name":"浙江鼎力","code":"603338","va":"46.87","pb":2.38,"min":"38.48","max":"69.71","roe":"19.32","eps":"3.6","market":"1","rate":"3","updateTime":"25/07/14 13:41:32"},{"name":"中航光电","code":"002179","va":"39.13","pb":3.67,"min":"31.30","max":"44.43","roe":"15.33","eps":"1.599","market":"0","rate":"3","updateTime":"25/07/14 13:41:35"},{"name":"嘉益股份","code":"301004","va":"71.32","pb":5.94,"min":"49.32","max":"87.96","roe":"43.9","eps":"4.7","market":"0","rate":"3","updateTime":"25/07/14 13:41:37"},{"name":"伟星股份","code":"002003","va":"10.58","pb":3,"min":"10.58","max":"14.08","roe":"16.14","eps":"0.6","market":"0","rate":"3","updateTime":"25/07/14 13:41:40"},{"name":"迈瑞医疗","code":"300760","va":"217.18","pb":7.27,"min":"212.93","max":"299.82","roe":"33.64","eps":"9.5","market":"0","rate":"3","updateTime":"25/07/14 13:41:43"},{"name":"长江电力","code":"600900","va":"30.70","pb":3.8,"min":"24.45","max":"30.70","roe":"15.7","eps":"1.32","market":"1","rate":"3","updateTime":"25/07/14 13:41:45"},{"name":"国电南瑞","code":"600406","va":"21.88","pb":3.77,"min":"21.13","max":"27.10","roe":"16.08","eps":"0.9","market":"1","rate":"3","updateTime":"25/07/14 13:41:47"},{"name":"北新建材","code":"000786","va":"26.51","pb":1.79,"min":"22.34","max":"34.33","roe":"18.2","eps":"2","market":"0","rate":"3","updateTime":"25/07/14 13:41:50"},{"name":"陕西煤业","code":"601225","va":"19.43","pb":2.2,"min":"17.77","max":"26.23","roe":"27","eps":"2.2","market":"1","rate":"3","updateTime":"25/07/14 13:41:53","index":54,"rorNow":"11.38","ror":"13.64"},{"name":"川恒股份","code":"002895","va":"23.45","pb":2.16,"min":"14.92","max":"24.24","roe":"16.44","eps":"1.527","market":"0","rate":"3","updateTime":"25/07/14 13:41:56"},{"name":"凌霄泵业","code":"002884","va":"16.19","pb":2.8,"min":"14.30","max":"20.40","roe":"19.73","eps":"1.25","market":"0","rate":"3","updateTime":"25/07/14 13:41:58"},{"name":"万泽股份","code":"000534","va":"14.47","pb":4.89,"min":"8.69","max":"16.90","roe":"14","eps":"0.35","market":"0","rate":"3","updateTime":"25/07/14 13:42:01"},{"name":"云南白药","code":"000538","va":"55.98","pb":2.58,"min":"47.81","max":"58.79","roe":"10.6","eps":"2.52","market":"0","rate":"3","updateTime":"25/07/14 13:42:03"},{"name":"华友钴业","code":"603799","va":"37.99","pb":1.79,"min":"21.02","max":"38.63","roe":"10","eps":"1.9","market":"1","rate":"3","updateTime":"25/07/14 13:42:06"},{"name":"内蒙华电","code":"600863","va":"4.31","pb":1.63,"min":"3.73","max":"4.80","roe":"11.6","eps":"0.29","market":"1","rate":"3","updateTime":"25/07/14 13:42:09"},{"name":"思源电气","code":"002028","va":"76.98","pb":4.48,"min":"61.96","max":"80.28","roe":"18.06","eps":"2.69","market":"0","rate":"3","index":20,"rorNow":"3.74","ror":"4.01","updateTime":"25/07/14 13:42:12"},{"name":"羚锐制药","code":"600285","va":"22.80","pb":4.62,"min":"17.87","max":"24.19","roe":"21.28","eps":"1.024","market":"1","rate":"3","updateTime":"25/07/14 13:42:14"},{"name":"潍柴动力","code":"000338","va":"15.36","pb":1.5,"min":"11.35","max":"17.83","roe":"14.81","eps":"1.13","market":"0","rate":"3","updateTime":"25/07/14 13:42:17"},{"name":"苏 泊 尔","code":"002032","va":"52.61","pb":9,"min":"45.04","max":"56.43","roe":"37.2","eps":"2.82","market":"0","rate":"3","updateTime":"25/07/14 13:42:19"},{"name":"新 大 陆","code":"000997","va":"33.12","pb":4.96,"min":"11.49","max":"33.12","roe":"14.4","eps":"1.12","market":"0","rate":"3","updateTime":"25/07/14 13:42:22"},{"name":"赛轮轮胎","code":"601058","va":"13.33","pb":2.22,"min":"11.72","max":"16.51","roe":"23.35","eps":"1.02","market":"1","rate":"3","updateTime":"25/07/14 13:42:24"},{"name":"新 和 成","code":"002001","va":"21.78","pb":2.3,"min":"16.50","max":"23.20","roe":16.7,"eps":1.92,"market":"0","updateTime":"25/07/14 13:42:27"},{"name":"仙鹤股份","code":"603733","va":"20.29","pb":1.86,"min":"14.39","max":"22.44","roe":13.9,"eps":1.5,"market":"1","rate":3,"updateTime":"25/07/14 13:42:29"},{"name":"松霖科技","code":"603992","va":"20.68","pb":2.82,"min":"15.73","max":"24.81","roe":16.08,"eps":1.1,"market":"1","rate":3,"updateTime":"25/07/14 13:42:32"},{"name":"新泉股份","code":"603179","va":"44.29","pb":3.92,"min":"33.67","max":"53.45","roe":17.3,"eps":2.21,"market":"1","rate":3,"updateTime":"25/07/14 13:42:34"},{"name":"海兴电力","code":"603556","va":"26.02","pb":1.83,"min":"24.46","max":"48.57","roe":15.69,"eps":2,"market":"1","rate":3,"updateTime":"25/07/14 13:42:37"},{"name":"汉钟精机","code":"002158","va":"17.58","pb":2.35,"min":"15.26","max":"20.79","roe":22.29,"eps":1.65,"market":"0","rate":3,"updateTime":"25/07/14 13:42:40"},{"name":"法拉电子","code":"600563","va":"113.09","pb":4.99,"min":"71.30","max":"133.00","roe":23.6,"eps":4.55,"market":"1","rate":3,"updateTime":"25/07/14 13:44:34"},{"name":"春风动力","code":"603129","va":"237.18","pb":5.88,"min":"122.15","max":"237.97","roe":19.7,"eps":7.1,"market":"1","rate":3,"updateTime":"25/07/14 13:42:45"},{"name":"昆药集团","code":"600422","va":"14.54","pb":2.06,"min":"12.06","max":"22.59","roe":8.06,"eps":0.77,"market":"1","rate":3,"updateTime":"25/07/14 13:42:47"},{"name":"济川药业","code":"600566","va":"26.32","pb":1.83,"min":"22.06","max":"40.58","roe":19.8,"eps":3.28,"market":"1","rate":3,"updateTime":"25/07/14 13:42:50"},{"name":"沪光股份","code":"605333","va":"28.49","pb":5.62,"min":"22.64","max":"38.44","roe":26.3,"eps":1.48,"market":"1","rate":3,"updateTime":"25/07/14 13:42:53"},{"name":"卫星化学","code":"002648","va":"17.42","pb":1.95,"min":"14.25","max":"22.07","roe":18.3,"eps":1.61,"market":"0","rate":3,"updateTime":"25/07/14 13:42:56"},{"name":"云铝股份","code":"000807","va":"15.85","pb":1.92,"min":"11.02","max":"18.37","roe":18.8,"eps":1.3,"market":"0","rate":3,"updateTime":"25/07/14 13:42:58"},{"name":"新天然气","code":"603393","va":"28.66","pb":1.42,"min":"27.08","max":"38.19","roe":16,"eps":2.47,"market":"1","rate":3,"updateTime":"25/07/14 13:43:01"},{"name":"美亚光电","code":"002690","va":"16.74","pb":6.37,"min":"11.55","max":"18.39","roe":27,"eps":0.84,"market":"0","rate":3,"updateTime":"25/07/14 13:43:03"},{"name":"天坛生物","code":"600161","va":"19.81","pb":3.5,"min":"18.88","max":"25.77","roe":14.8,"eps":0.78,"market":"1","updateTime":"25/07/14 13:43:06"},{"name":"亚翔集成","code":"603929","va":"36.55","pb":4.58,"min":"19.18","max":"37.12","roe":28.61,"eps":2.06,"market":"1","rate":3,"updateTime":"25/07/14 13:43:08"},{"name":"公牛集团","code":"603195","va":"47.30","pb":6.21,"min":"43.10","max":"60.07","roe":29.1,"eps":3.33,"market":"1","rate":3,"updateTime":"25/07/14 13:43:11"},{"name":"森麒麟","code":"002984","va":"18.98","pb":1.45,"min":"18.19","max":"27.32","roe":16.4,"eps":2.03,"market":"0","updateTime":"25/07/14 13:43:14"},{"name":"四方股份","code":"601126","va":"17.23","pb":3.39,"min":"14.15","max":"19.28","roe":16.2,"eps":0.87,"market":"1","rate":2,"updateTime":"25/07/14 13:43:17"},{"name":"宏发股份","code":"600885","va":"23.05","pb":3.72,"min":"18.15","max":"26.12","roe":17.4,"eps":1.6,"market":"1","rate":3,"updateTime":"25/07/14 13:43:19"},{"name":"永新股份","code":"002014","va":"11.95","pb":3.18,"min":"7.53","max":"12.09","roe":17.3,"eps":0.73,"market":"0","updateTime":"25/07/14 13:43:21"},{"name":"华能水电","code":"600025","va":"9.51","pb":3.01,"min":"8.43","max":"11.67","roe":11,"eps":0.46,"market":"1","updateTime":"25/07/14 13:43:24"},{"name":"瑞丰新材","code":"300910","va":"59.65","pb":5.38,"min":"34.35","max":"63.41","roe":20.9,"eps":2.36,"market":"0","updateTime":"25/07/14 13:43:26"},{"name":"海大集团","code":"002311","va":"55.59","pb":4.07,"min":"34.06","max":"60.66","roe":18.5,"eps":2.65,"market":"0","updateTime":"25/07/14 13:43:29"},{"name":"豪迈科技","code":"002595","va":"59.14","pb":4.69,"min":"34.07","max":"63.25","roe":21.4,"eps":2.4,"market":"0","updateTime":"25/07/14 13:43:31"},{"name":"恒瑞医药","code":"600276","va":"57.23","pb":8.31,"min":"38.06","max":"57.23","roe":10.99,"eps":0.71,"market":"1","rate":3,"updateTime":"25/07/14 13:44:29"},{"name":"雅克科技","code":"002409","va":"53.85","pb":3.51,"min":"48.21","max":"68.64","roe":11.7,"eps":1.87,"market":"0","rate":3,"index":93,"rorNow":"13.44","ror":"6.36","updateTime":"25/07/14 13:43:37"},{"name":"巨星科技","code":"002444","va":"30.79","pb":2.17,"min":"21.72","max":"33.53","roe":9.78,"eps":0.76,"market":"0","rate":3,"index":93,"rorNow":"5.50","ror":"5.34","updateTime":"25/07/14 13:43:39"},{"name":"中密控股","code":"300470","va":"37.28","pb":2.9,"min":"28.01","max":"41.30","roe":12.8,"eps":1.98,"market":"0","rate":3,"index":94,"rorNow":"6.57","ror":"5.79","updateTime":"25/07/14 13:43:42"},{"name":"扬农化工","code":"600486","va":"59.47","pb":2.2,"min":"46.90","max":"64.35","roe":14.5,"eps":1.83,"market":"1","rate":3,"index":95,"rorNow":"4.81","ror":"4.66","updateTime":"25/07/14 13:43:45"},{"name":"中国移动","code":"600941","va":"113.49","pb":1.77,"min":"91.20","max":"116.61","roe":11.9,"eps":3.2,"market":"1","rate":3,"index":96,"rorNow":"5.83","ror":"5.53","updateTime":"25/07/14 13:43:47"},{"name":"凤凰传媒","code":"601928","va":"11.66","pb":1.57,"min":"9.13","max":"11.66","roe":10.4,"eps":0.96,"market":"1","rate":3,"updateTime":"25/07/14 13:43:50"},{"name":"匠心家居","code":"301061","va":"87.19","pb":5.14,"min":"30.75","max":"87.19","roe":11.15,"eps":0.625,"market":"0","rate":3,"index":99,"rorNow":"0.81","ror":"2.86","updateTime":"25/07/14 13:43:53"},{"name":"东方电缆","code":"603606","va":"49.59","pb":4.88,"min":"38.14","max":"57.79","roe":16,"eps":1.82,"market":"1","rate":3,"updateTime":"25/07/14 13:43:55"},{"name":"瑞鹄模具","code":"002997","va":"38.03","pb":3.62,"min":"25.13","max":"46.87","roe":17.74,"eps":1.7,"market":"0","rate":3,"updateTime":"25/07/14 13:43:57"},{"name":"爱玛科技","code":"603529","va":"36.23","pb":3.57,"min":"24.73","max":"45.76","roe":17.9,"eps":0.78,"market":"1","rate":3,"updateTime":"25/07/14 13:44:00"},{"name":"涪陵榨菜","code":"002507","va":"12.94","pb":1.76,"min":"11.35","max":"15.41","roe":9.78,"eps":0.76,"market":"0","rate":3,"updateTime":"25/07/14 13:44:03"},{"name":"杰瑞股份","code":"002353","va":"36.35","pb":1.77,"min":"24.69","max":"40.96","roe":12.4,"eps":2.63,"market":"0","rate":3,"updateTime":"25/07/14 13:44:05"},{"name":"兆易创新","code":"603986","va":"117.69","pb":4.72,"min":"64.95","max":"138.22","roe":14.4,"eps":1.64,"market":"1","rate":3,"updateTime":"25/07/14 13:44:08"},{"name":"协创数据","code":"300857","va":"81.84","pb":8.44,"min":"32.20","max":"92.67","roe":20.23,"eps":2.2,"market":"0","rate":3,"updateTime":"25/07/14 13:44:11"},{"name":"山金国际","code":"000975","va":"19.15","pb":4.2,"min":"15.06","max":"20.92","roe":17.9,"eps":0.78,"market":"0","rate":3,"updateTime":"25/07/14 13:44:13"},{"name":"万丰奥威","code":"002085","va":"15.93","pb":4.78,"min":"11.30","max":"22.66","roe":11.4,"eps":0.35,"market":"0","rate":3,"updateTime":"25/07/14 13:44:16"},{"name":"明阳电气","code":"301291","va":"41.92","pb":2.87,"min":"26.34","max":"54.48","roe":19.12,"eps":1.4,"market":"0","rate":3,"updateTime":"25/07/14 13:44:18"},{"name":"中熔电气","code":"301031","va":"83.86","pb":6.79,"min":"44.46","max":"92.31","roe":13.9,"eps":2.82,"market":"0","rate":3,"updateTime":"25/07/14 13:44:21"},{"name":"XD云天化","code":"600096","va":"22.56","pb":1.96,"min":"15.74","max":"22.60","roe":"24.4","eps":"2.91","market":"1","rate":"3","updateTime":"25/05/22 10:28:33","index":1,"rorNow":"13.69","ror":"13.41"},{"name":"XD北大荒","code":"600598","va":"14.40","pb":3.47,"min":"11.14","max":"16.51","roe":"13.9","eps":"0.65","market":"1","rate":"3","updateTime":"25/05/23 13:29:36"},{"name":"XD恒瑞医","code":"600276","va":"55.13","pb":7.69,"min":"38.06","max":"55.13","roe":10.99,"eps":0.71,"market":"1","rate":3,"updateTime":"25/05/23 13:33:33"},{"name":"XD紫金矿","code":"601899","va":"19.15","pb":3.67,"min":"14.40","max":"19.15","roe":"21.8","eps":"1.21","market":"1","rate":"3","updateTime":"25/06/13 17:59:00"},{"name":"XD法拉电","code":"600563","va":"103.41","pb":4.56,"min":"71.30","max":"133.00","roe":23.6,"eps":4.55,"market":"1","rate":3,"updateTime":"25/06/13 18:01:54"}]
  </script>
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 15px auto;
      background-color: #f8f9fa;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      overflow-x: auto
    }

    td,
    th {
      border: 1px solid #e0e0e0;
      padding: 12px;
      text-align: left
    }

    th {
      background-color: #f5f5f5;
      width: 160px;
      text-align: right
    }

    input {
      width: calc(100% - 20px);
      padding: 8px;
      margin-bottom: 10px;
      font-size: 15px;
    }

    .btn {
      background-color: #2c3e50;
      color: white;
      padding: 15px 30px;
      border: none;
      display: block;
      margin-top: 20px;
      cursor: pointer;
      flex: 1;
      font-size:14px;
    }

    .btn1 {
      background-color: #b873e8;
      
    }


    .btn:hover {
      background-color: #3498db
    }

    .btn1:hover {
      background-color: #d24fe6
    }

    .btn2 {
      background-color: rgb(28, 137, 52);
    }

    .btn2:hover {
      background-color: rgb(53, 141, 72)
    }

    .red-border {
      border: 1px solid red
    }

    .red-row {
      background-color: #ffebee;
    }

    .warning {
      color: red;
      font-size: 0.9em
    }

    .active {
      background-color: bisque;
    }

    p {
      font-weight: normal
    }

    .item {
      display: flex;
      align-items: center;
    }

    .item label {
      width: 170px
    }

    .contetn {
      padding: 0 15px;
    }

    body {
      font-size: 15px;
    }

    .star {
      position: relative;
    }

    .star input {
      display: none;
      visibility: hidden;
    }

    .star .colx {
      display: block;
      padding: 0.5em;
      text-align: center;
      border-bottom: 1px solid #CCC;
      color: #666;
    }

    .star .colx::before {
      font-size: 15px;
      content: "+";
      vertical-align: text-top;
      display: inline-block;
      width: 20px;
      height: 20px;
      margin-right: 3px;
      background: radial-gradient(ellipse at center, #CCC 50%, transparent 50%);
    }

    .star #expand {
      height: 0px;
      overflow: hidden;
      transition: height 0.5s;
    }

    .star #toggle:checked~#expand {
      min-height: 250px;
      height: 350px;
      overflow-y: auto; 
      padding-right: 12px;
    }

    .star #toggle:checked~label::before {
      content: "-";
    }
    .activec{
      color: #b75f00;
    }
    ul{
      padding-left:16px;
    }
    .sortBtn{
      position: absolute;
      right: 10px;
      top:5px;
      display: flex;
      align-items: center;
      cursor: pointer;
      border: 1px solid #e7e6e6; 
      background-color: #eceae8; 
      padding: 3px 4px;
      border-radius: 4px;
      z-index:2;
    }
    .sortBtn .icon {
      transition: all 0.3s ease;
      transform-origin: center;
    }
    .sortBtn .icon.asc{
      transform: rotate(0);
    }
    .sortBtn .icon.desc{
      transform: rotate(180deg);
    }
    .sortBtn .icon.asc path,.sortBtn .icon.desc path{
      fill: #1363f4
    }
  </style>
</head>

<body>

  <h2 style="text-align: center; color: #2c3e50">估值计算器</h2>
  <div class="contetn">

    <form id="valuation-form">
      <div class="item">
        <label for="stock-name" style="display: block; margin-bottom: 10px">股票名称：</label>
        <input type="text" id="stock-name" placeholder="请输入">
      </div>
      <div class="item">
        <label for="code" style="display: block; margin-bottom: 10px">股票代码：</label>
        <input type="text" id="code" placeholder="请输入">
      </div>
      <div class="item">
        <label for="stockValue" style="display: block; margin-bottom: 10px">当前股价：</label>
        <input type="number" id="stockValue" placeholder="请输入" />
      </div>
      <div class="item">
        <label for="current-pb" style="display: block; margin-bottom: 10px">当前PB：</label>
        <input type="number" id="current-pb" placeholder="请输入" />
      </div>

      <div class="item">
        <label for="historical-min" style="display: block; margin-bottom: 10px">历史最低价：</label>
        <input type="number" id="historical-min" placeholder="请输入" />
      </div>


      <div class="item">
        <label for="historical-max" style="display: block; margin-bottom: 10px">历史最高价：</label>
        <input type="number" id="historical-max" placeholder="请输入" />
      </div>

      <div class="item">
        <label for="roe" style="display: block; margin-bottom: 10px">ROE（%）：</label>
        <input type="number" id="roe" placeholder="请输入">
      </div>

      <div class="item">
        <label for="eps" style="display: block; margin-bottom: 10px">EPS（元）：</label>
        <input type="number" id="eps" placeholder="请输入">
      </div>
      <div class="item">
        <label for="treasury-rate" style="display: block; margin-bottom: 10px">国债利率（%）：</label>
        <input type="number" id="treasury-rate" placeholder="请输入" />
      </div>







      <div class="item">
        <button type="button" class="btn btn1" onclick="reset()">清空</button>
        <button type="button" class="btn btn2" onclick="save()">保存</button>
        <button type="button" style="flex:2" class="btn" onclick="calculate(this)">计算</button>
      </div>

    </form>



    <div id="analysis"
      style="margin-top: 20px; padding: 15px; background-color: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1)">
    </div>

    <div id="analysis"
      style="margin-top: 20px; padding: 15px; background-color: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1)">
      
       <div class="" style="margin-bottom:10px;display:flex; align-items:center"> 
        <input id="kw" type="text" style="margin-bottom:0" id="kw" oninput="onChangeKw(this)" placeholder="请输入关键字">
         <button class=" " onclick="clearKw()" style="margin-left:10px;min-width:70px;height:35px">清空</button>
      </div>
      <section class="star">
        <label class="sortBtn" onclick="onsort()">
          <span>排序</span>
          <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path d="M384 140.992V928c0 9.344 3.008 17.024 8.96 23.04 6.016 5.952 13.696 8.96 23.04 8.96a31.168 31.168 0 0 0 23.04-8.96 31.168 31.168 0 0 0 8.96-23.04V219.008l243.008 241.984a29.568 29.568 0 0 0 44.48 0 31.744 31.744 0 0 0 0.576-44.992L439.04 119.04a32.256 32.256 0 0 0-16.512-8.96 29.568 29.568 0 0 0-18.496 1.92 35.52 35.52 0 0 0-14.464 11.52 28.8 28.8 0 0 0-5.568 17.536v-0.064z" fill="#666"></path></svg>
        </label>
        <input id="toggle" type="checkbox" checked>
        <label for="toggle" class="colx">收藏列表</label>


        <div id="expand">
            <div id="exBox"></div>
        </div>
      </section>
    </div>
    <div id="analysis"
      style="margin-top: 20px; padding: 15px; background-color: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1)">
       <div class="item">
        <button type="button" class="btn btn1" onclick="initOriginData()">初始化</button> 
         <button type="button" class="btn btn2" onclick="copyAll()">复制全部</button> 
      </div>
    </div>

  </div> 
  <script>
    let dir = '';
    function onsort(){
      const dom = document.querySelector('.sortBtn .icon');
      dom.classList.remove('asc')
      dom.classList.remove('desc')
      if(dir == ''){
       dir = 'asc';
        dom.classList.add(dir)
      }else if(dir == 'asc'){
       dir = 'desc';
        dom.classList.add(dir)
      }else{
        dir = ''; 
      }
       
      console.log(dom.classList)
      
      starLs('',dir)
    }
     const CalculateLsKey = 'stock-preference';
    function clearKw(){ 
      document.getElementById('kw').value = '';
      starLs()
    }
    function onChangeKw(evt){
      console.log(evt.value)
      starLs(evt.value)
    }
    function nativeCopy(t){
       var e = document.createElement('textarea');
      e.value = t;
      document.body.appendChild(e);
      e.select();
      e.setSelectionRange(0, 99999);
      try {
        var a = document.execCommand('copy');
        if (a) {
          console.log('使用原生 Clipboard API 复制成功');
        } else {
          console.log('使用原生 Clipboard API 复制失败');
          //   this.showToast({
          //     title: '复制失败，请手动复制',
          //     icon: 'none',
          //   });
        }
      } catch (n) {
        console.error('使用原生 Clipboard API 复制时出错:', n);
        // this.showToast({
        //   title: '复制失败，请手动复制',
        //   icon: 'none',
        // });
      }
      document.body.removeChild(e);
    }
    function copyAll(){
      const hasListStr = localStorage.getItem(CalculateLsKey);
      console.log(hasListStr)
      nativeCopy(hasListStr)
    }
    function initOriginData(){
      localStorage.setItem(CalculateLsKey,JSON.stringify($list ));
    }
    function reset(value = {}) {
      document.getElementById('stock-name').value = value.name || '';
      document.getElementById('roe').value = value.roe || '';
      document.getElementById('eps').value = value.eps || '';
      document.getElementById('treasury-rate').value = value.rate || '';
      document.getElementById('historical-min').value = value.min || '';
      document.getElementById('historical-max').value = value.max || '';
      document.getElementById('current-pb').value = value.pb || '';
      document.getElementById('stockValue').value = value.va || '';
      document.getElementById('code').value = value.code || '';
    }
   
    function starLs(kw='',direction='') {
      const hasListStr = localStorage.getItem(CalculateLsKey);
      const ls = hasListStr ? JSON.parse(hasListStr) : $list;
      const lasLs = calc(ls);
      if(direction == 'asc'){
        lasLs.sort((a,b)=>  a.rorNow - b.rorNow)
      }else if(direction == 'desc'){
        lasLs.sort((a,b)=>  b.rorNow - a.rorNow)
      }
      const html = `
       <ul style="padding-left:16px;">
        ${lasLs.filter(e=>{
          if(kw){
            return  (e.name + "").includes(kw) ||
        (e.code + "").includes(kw)
          }
          return true
        }).map((e,idx) => {
        let c = '';
          if(e.rorNow >= 5){
            c = 'red'
          }else if(e.rorNow > 3 && e.rorNow <5){
            c= 'orange'
          }
        return `<li data-name="${e.name}" >
          <div style="display:flex; justify-content:space-between;padding:5px 0">
          <div style=" flex: 1; " onClick="initCache('${e.name}')">
            <span style="color: #3f3ff9; text-decoration: underline; font-size:13px;">${idx+1}.${e.name}</span>&nbsp;
            <div style="margin-top:2px;color:#555;font-size:12px">
                <span>rorTTM <span  style="font-weight: 700;color:${c}">${e.rorNow}%</span>&nbsp；<span>roe ${e.roe}%</span></span>
            </div>
            
        </div>
         <div style="min-width:70px;">
 <button style="font-size:14px;" onClick="nativeCopy('${e.name}')">复制</button> &nbsp;
     <button style="font-size:14px;" onClick="delLs('${e.name}')">删除</button>
    </div>
          </div>

          </li>`
      }).join('')}
          
        </ul>
      `
      document.getElementById('exBox').innerHTML = html;
    }
    function delLs(name) {
      const hasListStr = localStorage.getItem(CalculateLsKey);
      const ls = hasListStr ? JSON.parse(hasListStr) : [];
      const activeNameIdx = ls.findIndex((item) => item.name === name);
      if (activeNameIdx != -1) {
        ls.splice(activeNameIdx, 1);
      }
      localStorage.setItem(CalculateLsKey, JSON.stringify(ls));
      starLs();
    }
    function initCache(sname){
       const hasListStr = localStorage.getItem(CalculateLsKey);
      const ls = hasListStr ? JSON.parse(hasListStr) : [];
      const item = ls.find((item) => item.name === sname);
      console.log(item)
      item &&  reset(item);
    
      
      window.scrollTo({ top: 0,
      left: 0,
      behavior: 'smooth',});
      setTimeout(()=>{
        calculate(item);
        console.log('cal')
      },500)
    }
    function getMk(code){
       let market = ''
       const shanghaiRegex = /^(60[0135]|68[89])\d{3}$/;
       const shenzhenRegex = /^(00[02]|30[01])\d{3}$/;
      if (shanghaiRegex.test(code)) {
                  market  =  "1"
                } else if (shenzhenRegex.test(code)) {
                  market  =  "0"
                }
      return market
    }
    function save() {
      const code = document.getElementById('code').value;
     
      const res = {
        name: document.getElementById('stock-name').value,
        roe: document.getElementById('roe').value,
        eps: document.getElementById('eps').value,
        rate: document.getElementById('treasury-rate').value,
        min: document.getElementById('historical-min').value,
        max: document.getElementById('historical-max').value,
        pb: document.getElementById('current-pb').value,
        va: document.getElementById('stockValue').value,
        code,
        market: getMk(code),
      }
      const hasListStr = localStorage.getItem(CalculateLsKey);
      const ls = hasListStr ? JSON.parse(hasListStr) : [];
      const activeNameIdx = ls.findIndex((item) => item.name === res.name);
      if (activeNameIdx != -1) {
        ls.splice(activeNameIdx, 1, res);
      } else {
        ls.push(res);
      }
      localStorage.setItem(CalculateLsKey, JSON.stringify(ls));
      starLs()
    }
    // 计算函数
    function calculate(evt) {
      !evt && reset({
        name: '公牛集团',
        roe: 30,
        eps: 3.37,
        rate: 3,
        min: 52,
        max: 112,
        pb: 6.53,
        va: 74.98
      })
      !evt && starLs()
      // 获取输入并转为数值
      const roe = (parseFloat(document.getElementById('roe').value) / 100 || 0).toFixed(2);
      const roeVa = (roe * 100).toFixed(2);
      const eps = parseFloat(document.getElementById('eps').value) || 0;
      const treasuryRate = (parseFloat(document.getElementById('treasury-rate').value) / 100 || 0).toFixed(2);
      const historicalMin = parseFloat(document.getElementById('historical-min').value);
      const historicalMax = parseFloat(document.getElementById('historical-max').value);
      const currentPbInput = document.getElementById('current-pb') || 0;
      const stockName = document.getElementById('stock-name').value
      const stockValue = parseFloat(document.getElementById('stockValue').value || 0) || 0;
      const currentPb = parseFloat(currentPbInput.value || 0);
      // 验证输入有效性
      if (roe <= 0 || eps <= 0) {
        alert("请输入有效的ROE和EPS！");
        return;
      }

      // 计算每股净资产（B）
      const b = eps / roe;



      const BValue = (eps / roe).toFixed(2) * 1;
      const currentVPb = (stockValue / BValue).toFixed(2) * 1;
      const currentVPb_Min = (historicalMin / BValue);
      const currentVPb_Max = (historicalMax / BValue);
      const ror = (currentVPb / BValue).toFixed(2);
      const addRate = (roeVa / currentVPb).toFixed(2);
      const latestRate = (addRate - treasuryRate * 100).toFixed(2);
      const bondRate = (roeVa / currentPb).toFixed(2) * 1;
      const dd = (stockValue / BValue).toFixed(2);
      const twoTimeRate = 2 * treasuryRate*100;
      const twoTimeRatePb = (roeVa/(twoTimeRate)).toFixed(2);
      // 显示分析结论
      document.getElementById('analysis').innerHTML = `
        
<div style="padding-left: 20px; padding-right: 25px; padding-bottom: 25px;">
  <div>
    <h3><strong>1. 核心公式</strong></h3>

    <p> <br>
      <b>股价 = PB * B <b /><br><br>
        其中：
    </p>

    <ul>
      <li>
        <p><strong>PB</strong> = ROE / (国债利率 + 风险溢价) </p>
      </li>
      <li>
        <p><strong>B</strong> = EPS / ROE（每股净资产）</p>
      </li>
    </ul>

    <hr>

  </div>
  <div>

    <h3><strong>2. 代入【${stockName}】数据</strong></h3>

  </div>
  <div class="note-content">
    <div>
      <hr>
    </div>
    <div>

      <h4><strong>A. 计算每股净资产（B）</strong></h4>

      <p><b>B = EPS / ROE </b>= ${eps} / ${roeVa}% = ${BValue} 元</p>

      <hr>

    </div>
    <div>

      <h4><strong>2. 计算当前PB</strong></h4>
      <p><b>PB(min) = 股价(min) / B </b><br/>= ${historicalMin} / ${BValue} = ${currentVPb_Min.toFixed(2)} 倍</p>
      <p class="activec"><b>PB(当前) = 股价(当前) / B </b><br/>= ${stockValue} / ${BValue} = ${dd} 倍</p>
      
      <p><b>PB(max) = 股价(max) / B </b><br/>= ${historicalMax} / ${BValue} = ${currentVPb_Max.toFixed(2)} 倍</p>

      <hr>

    </div>
    <div>

      <h4><strong>3. 计算隐含的投资回报率（ROR）</strong></h4>
      <p><b>ROR(min) = ROE / PB </b><br/>= ${roeVa}% / ${currentVPb_Min.toFixed(2)} = ${(roeVa / currentVPb_Min).toFixed(2)}%</p>
      <p class="activec"><b>ROR(当前) = ROE / PB </b><br/>= ${roeVa}% / ${currentVPb} = ${addRate}%</p>
      <p><b>ROR(max) = ROE / PB </b><br/>= ${roeVa}% / ${currentVPb_Max.toFixed(2)} = ${(roeVa / currentVPb_Max).toFixed(2)}%</p>

      <hr>

    </div>
    <div>

      <h4><strong>4. 计算风险溢价</strong>(跟国债${treasuryRate * 100}%相比)</h4>

      <p><b>风险溢价 = ROR - 国债利率 </b>= ${addRate}% - ${treasuryRate * 100}% = ${latestRate}%</p>
    </div>
    <div>

      <h4><strong>5. 结论与建议</strong></h4>

    </div>
    <div>
 
      <h4><strong>(1) 债券类比</strong></h4>
      <div>
        假设【${stockName}】的每股净资产为100元，ROE 稳定在 ${roe * 100}% 左右，意味着每年能为股东创造 ${100 * roe} 元的净利润。此时若以 ${currentPb} 倍 PB 买入，相当于：
        <ul>
          <li>
            <p>本金投入：${100 * currentPb}元</p>
          </li>
          <li>
            <p>年收益：${roe * 100}元（ROE×净资产=${roeVa}%×100元）</p>
          </li>
          <li>
            <p>预期收益率：${roeVa} 元 / ${100 * currentPb}元 ≈ ${bondRate}%（ROE/PB）</p>
          </li>

          <li>
            <p>这就类似于用${100 * currentPb}元购买了一份面值100元、年利率${roeVa}%的债券，虽然本金溢价${(100 * currentPb - 100).toFixed(0)
        }%，但预期收益率（${bondRate}%）仍${bondRate - treasuryRate * 100 > 0 ? '高于' : '低于'}当前的无风险收益率（${treasuryRate * 100}%）
            </p>
          </li>
          <li>
            <p class="activec">如果预期收益率：2倍${treasuryRate*100}%=${twoTimeRate}%,需要PB，${roeVa}/${twoTimeRate}% ≈ ${ roeVa/(twoTimeRate)*100} ≈ ${twoTimeRatePb}PB，
          <br/>即： 股价 = PB * B = ${twoTimeRatePb} * ${BValue} = ${ (twoTimeRatePb * BValue).toFixed(2)}</p>
          </li>

        </ul>
      </div>
    </div>
  </div>

</div>
</div>


    `;

    }

const foo2 = (v, len = 2) => {
  return Number(v).toFixed(len);
};
const calc = (ls ) => {
  return ls.map((el, idx) => {
    return {
      ...el,
      index: idx + 1,
      rorNow: foo2(el.roe / (el.va / ((el.eps / el.roe) * 100)), 2),
      ror: foo2(el.roe / el.pb, 2),
    };
  });
};

    // 初始化时自动执行计算
    window.addEventListener('load', () => {
      calculate()
    });
  </script>

</body>

</html>
